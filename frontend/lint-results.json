[{"filePath":"C:\\3rd Year\\SRA\\frontend\\actions\\analysis.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use server\";\r\n\r\nimport { z } from \"zod\";\r\nimport { PromptSettings } from \"@/types/project\";\r\nimport { redirect } from \"next/navigation\";\r\n\r\nconst AnalysisSchema = z.object({\r\n    requirements: z.string().min(1, \"Requirements are required\"),\r\n    projectName: z.string().min(1, \"Project name is required\"),\r\n    projectId: z.string().optional(),\r\n    settings: z.any().optional(), // PromptSettings\r\n    token: z.string().min(1, \"Authentication required\"),\r\n});\r\n\r\nexport type AnalysisActionState = {\r\n    error?: string;\r\n    success?: boolean;\r\n    id?: string;\r\n    pending?: boolean;\r\n};\r\n\r\nexport async function createAnalysisAction(\r\n    prevState: AnalysisActionState,\r\n    formData: FormData\r\n): Promise<AnalysisActionState> {\r\n    const token = formData.get(\"token\") as string;\r\n    const requirements = formData.get(\"requirements\") as string;\r\n    const projectName = formData.get(\"projectName\") as string;\r\n    const projectId = formData.get(\"projectId\") as string;\r\n    const settingsRaw = formData.get(\"settings\") as string;\r\n\r\n    let settings: PromptSettings | undefined;\r\n    try {\r\n        settings = settingsRaw ? JSON.parse(settingsRaw) : undefined;\r\n    } catch (e) {\r\n        console.warn(\"Failed to parse settings in action\", e);\r\n    }\r\n\r\n    const validatedFields = AnalysisSchema.safeParse({\r\n        token,\r\n        requirements,\r\n        projectName,\r\n        projectId: projectId || undefined,\r\n        settings,\r\n    });\r\n\r\n    if (!validatedFields.success) {\r\n        return {\r\n            error: \"Invalid input fields. Please check your project name and description.\",\r\n        };\r\n    }\r\n\r\n    try {\r\n        const response = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/analyze`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n            body: JSON.stringify({\r\n                text: requirements,\r\n                srsData: {\r\n                    introduction: {\r\n                        projectName: { content: projectName },\r\n                        purpose: { content: requirements },\r\n                    },\r\n                },\r\n                projectId: projectId || undefined,\r\n                settings: settings || undefined,\r\n                draft: true,\r\n            }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json().catch(() => ({}));\r\n            return {\r\n                error: errorData.error || \"Failed to initialize project. Please try again.\",\r\n            };\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.status === \"draft\" && data.id) {\r\n            // We don't redirect inside the action if we want to handle it in the component \r\n            // OR we can use redirect() but it throws an error that Next.js catches.\r\n            // For better UX with toast, we return the ID.\r\n            return { success: true, id: data.id };\r\n        }\r\n\r\n        return { error: \"Unexpected response from server.\" };\r\n    } catch (error) {\r\n        console.error(\"Action error:\", error);\r\n        return { error: \"Network error occurred. Please check your connection.\" };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\analysis\\[id]\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\analysis\\[id]\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5625,5628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5625,5628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":238,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":238,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10584,10587],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10584,10587],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10863,10866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10863,10866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\analysis\\compare\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1192,1195],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1192,1195],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\analysis\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\analysis\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\auth\\login\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\auth\\signup\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\coming-soon\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\error\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\global-error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\not-found.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setAnalysisResult' is assigned a value but never used.","line":74,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, Suspense, useActionState, startTransition } from \"react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { Navbar } from \"@/components/navbar\"\r\nimport { HeroSection } from \"@/components/hero-section\"\r\nimport { ChatInput } from \"@/components/chat-input\"\r\nimport { ResultsTabs } from \"@/components/results-tabs\"\r\nimport { AboutSection } from \"@/components/about-section\"\r\nimport { FaqSection } from \"@/components/faq-section\"\r\nimport { Footer } from \"@/components/footer\"\r\nimport type { Analysis } from \"@/types/analysis\"\r\nimport { toast } from \"sonner\"\r\nimport { createAnalysisAction } from \"@/actions/analysis\"\r\n\r\nconst defaultAnalysis: Analysis = {\r\n  id: \"preview\",\r\n  userId: \"preview\",\r\n  status: \"COMPLETED\",\r\n  version: 1,\r\n  createdAt: new Date().toISOString(),\r\n  rootId: \"preview\",\r\n  parentId: null,\r\n  projectTitle: \"Untitled Project\",\r\n  introduction: {\r\n    purpose: \"\",\r\n    productScope: \"\",\r\n    intendedAudience: \"\",\r\n    documentConventions: \"\",\r\n    references: []\r\n  },\r\n  overallDescription: {\r\n    productPerspective: \"\",\r\n    productFunctions: [],\r\n    userClassesAndCharacteristics: [],\r\n    operatingEnvironment: \"\",\r\n    designAndImplementationConstraints: [],\r\n    userDocumentation: [],\r\n    assumptionsAndDependencies: []\r\n  },\r\n  externalInterfaceRequirements: {\r\n    userInterfaces: \"\",\r\n    hardwareInterfaces: \"\",\r\n    softwareInterfaces: \"\",\r\n    communicationsInterfaces: \"\"\r\n  },\r\n  systemFeatures: [],\r\n  nonFunctionalRequirements: {\r\n    performanceRequirements: [],\r\n    safetyRequirements: [],\r\n    securityRequirements: [],\r\n    softwareQualityAttributes: [],\r\n    businessRules: []\r\n  },\r\n  otherRequirements: [],\r\n  glossary: [],\r\n  appendices: {\r\n    analysisModels: {},\r\n    tbdList: []\r\n  },\r\n  missingLogic: [],\r\n  contradictions: [],\r\n}\r\n\r\nimport { fetchProject } from \"@/lib/projects-api\"\r\nimport { PromptSettings } from \"@/types/project\";\r\nimport { Folder } from \"lucide-react\"\r\n\r\nfunction HomeContent() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const { authenticateWithToken, token } = useAuth()\r\n  const [analysisResult, setAnalysisResult] = useState<Analysis>(defaultAnalysis)\r\n\r\n  const [state, formAction, isPending] = useActionState(createAnalysisAction, {});\r\n\r\n  const projectId = searchParams.get(\"projectId\")\r\n  const [projectName, setProjectName] = useState<string>(\"\")\r\n\r\n  const [projectSettings, setProjectSettings] = useState<PromptSettings | null>(null);\r\n\r\n  useEffect(() => {\r\n    const urlToken = searchParams.get(\"token\")\r\n    const urlRefreshToken = searchParams.get(\"refreshToken\")\r\n    if (urlToken) {\r\n      authenticateWithToken(urlToken, urlRefreshToken || undefined)\r\n    }\r\n  }, [searchParams, authenticateWithToken])\r\n\r\n  useEffect(() => {\r\n    if (projectId && token) {\r\n      fetchProject(token, projectId).then(p => {\r\n        setProjectName(p.name);\r\n        if (p.settings) setProjectSettings(p.settings);\r\n      }).catch(() => setProjectName(\"Unknown Project\"));\r\n    }\r\n  }, [projectId, token])\r\n\r\n  // Handle Action State changes\r\n  useEffect(() => {\r\n    if (state.error) {\r\n      toast.error(state.error);\r\n    }\r\n    if (state.success && state.id) {\r\n      toast.success(\"Project initialized! Proceeding to Structured Input.\");\r\n      router.push(`/analysis/${state.id}`);\r\n    }\r\n  }, [state, router]);\r\n\r\n  const handleAnalyze = async (requirements: string, settings: PromptSettings, name: string) => {\r\n    if (!token) {\r\n      toast.error(\"You must be logged in to start a project.\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"token\", token);\r\n    formData.append(\"requirements\", requirements);\r\n    formData.append(\"projectName\", name);\r\n    if (projectId) formData.append(\"projectId\", projectId);\r\n    formData.append(\"settings\", JSON.stringify(settings));\r\n\r\n    startTransition(() => {\r\n      formAction(formData);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <Navbar />\r\n      <main className=\"flex-1\">\r\n        <HeroSection />\r\n\r\n        {projectId && (\r\n          <div className=\"container mx-auto px-4 mt-6 mb-2\">\r\n            <div className=\"bg-primary/10 border border-primary/20 text-primary px-4 py-3 rounded-md flex items-center gap-2\">\r\n              <Folder size={18} />\r\n              <span className=\"font-medium\">Analysis Context: <strong>{projectName || \"Loading...\"}</strong></span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <ChatInput onAnalyze={handleAnalyze} isLoading={isPending} initialSettings={projectSettings || undefined} />\r\n        <ResultsTabs data={analysisResult} />\r\n        <AboutSection />\r\n        <FaqSection />\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function HomePage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"min-h-screen bg-background\" />}>\r\n      <HomeContent />\r\n    </Suspense>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\projects\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\projects\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\projects\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\DFDViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":36,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mapToReactFlow' is assigned a value but never used.","line":155,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":160,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6433,6436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6433,6436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'direction' is assigned a value but never used.","line":199,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'levelPrefix' is defined but never used.","line":199,"column":75,"nodeType":null,"messageId":"unusedVar","endLine":199,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNodes' is assigned a value but never used.","line":200,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setEdges' is assigned a value but never used.","line":201,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":201,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":201,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7940,7943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7940,7943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fitView' is assigned a value but never used.","line":202,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":202,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { Layers, Download } from 'lucide-react';\r\nimport { toPng } from 'html-to-image';\r\nimport { Button } from '@/components/ui/button';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    ReactFlow,\r\n    Background,\r\n    Controls,\r\n    useNodesState,\r\n    useEdgesState,\r\n    MarkerType,\r\n    NodeProps,\r\n    Node,\r\n    Handle,\r\n    Position,\r\n    ReactFlowProvider,\r\n    useReactFlow,\r\n} from '@xyflow/react';\r\nimport '@xyflow/react/dist/style.css';\r\n// import * as dagre from '@dagrejs/dagre'; // Removed top-level import to avoid require error\r\n\r\n// -----------------------------------------------------------------------------\r\n// 0. SHARED TYPES\r\n// -----------------------------------------------------------------------------\r\n\r\ninterface DFDNodeData extends Record<string, unknown> {\r\n    label: string;\r\n}\r\n\r\ntype DFDNodeType = Node<DFDNodeData>;\r\n\r\n// -----------------------------------------------------------------------------\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\n// ... (keep nodeTypes as is)\r\n\r\n// Process Node: Gane-Sarson Style (Rounded corners, thick borders)\r\nconst ProcessNode = ({ data }: NodeProps<DFDNodeType>) => {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.8 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            whileHover={{ scale: 1.05 }}\r\n            transition={{ duration: 0.3, type: \"spring\", stiffness: 300, damping: 20 }}\r\n            className=\"flex flex-col items-center justify-center p-3 rounded-2xl bg-white border-[2.5px] border-blue-600 shadow-sm w-[140px] h-[140px] hover:shadow-blue-200/50 hover:shadow-2xl transition-all duration-300 group relative\"\r\n        >\r\n            <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-600 text-[10px] text-white px-2 py-0.5 rounded-full font-bold uppercase tracking-tighter\">\r\n                Process\r\n            </div>\r\n\r\n            <Handle type=\"target\" position={Position.Top} className=\"!w-2 !h-2 !bg-blue-600 !border-white\" />\r\n            <Handle type=\"target\" position={Position.Left} className=\"!w-2 !h-2 !bg-blue-600 !border-white\" />\r\n\r\n            <div className=\"text-center text-xs font-bold text-slate-900 leading-tight px-1 group-hover:scale-110 transition-transform\">\r\n                {data.label}\r\n            </div>\r\n\r\n            <Handle type=\"source\" position={Position.Right} className=\"!w-2 !h-2 !bg-blue-600 !border-white\" />\r\n            <Handle type=\"source\" position={Position.Bottom} className=\"!w-2 !h-2 !bg-blue-600 !border-white\" />\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// External Entity Node: Professional, Solid, Square\r\nconst ExternalEntityNode = ({ data }: NodeProps<DFDNodeType>) => {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            whileHover={{ y: -5 }}\r\n            transition={{ duration: 0.4 }}\r\n            className=\"flex flex-col items-center justify-center px-5 py-4 rounded-md bg-slate-900 border-[2px] border-slate-900 shadow-md min-w-[150px] hover:bg-slate-800 transition-all duration-300 relative\"\r\n        >\r\n            <div className=\"absolute -top-2.5 left-4 bg-slate-400 text-[9px] text-white px-1.5 py-0.5 rounded font-black uppercase italic\">\r\n                External\r\n            </div>\r\n\r\n            <Handle type=\"target\" position={Position.Top} className=\"!w-2 !h-2 !bg-slate-400 !border-slate-900\" />\r\n            <Handle type=\"target\" position={Position.Left} className=\"!w-2 !h-2 !bg-slate-400 !border-slate-900\" />\r\n\r\n            <div className=\"text-center font-black text-white uppercase text-[11px] tracking-widest leading-none\">\r\n                {data.label}\r\n            </div>\r\n\r\n            <Handle type=\"source\" position={Position.Right} className=\"!w-2 !h-2 !bg-slate-400 !border-slate-900\" />\r\n            <Handle type=\"source\" position={Position.Bottom} className=\"!w-2 !h-2 !bg-slate-400 !border-slate-900\" />\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// Data Store Node: Open-ended Parallel Lines\r\nconst DataStoreNode = ({ data }: NodeProps<DFDNodeType>) => {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            whileHover={{ boxShadow: \"0 10px 25px -5px rgba(16, 185, 129, 0.2)\" }}\r\n            className=\"relative flex items-center justify-center px-8 py-5 min-w-[180px] bg-emerald-50 border-y-[3px] border-emerald-600 shadow-sm hover:bg-emerald-100 transition-colors group\"\r\n        >\r\n            <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-emerald-600\"></div>\r\n\r\n            <div className=\"text-center text-[11px] font-black text-emerald-900 uppercase tracking-wider\">\r\n                {data.label}\r\n            </div>\r\n\r\n            <Handle type=\"target\" position={Position.Left} className=\"!w-2 !h-2 !bg-emerald-600 !border-white\" />\r\n            <Handle type=\"source\" position={Position.Right} className=\"!w-2 !h-2 !bg-emerald-600 !border-white\" />\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nconst nodeTypes = {\r\n    process: ProcessNode,\r\n    external_entity: ExternalEntityNode,\r\n    data_store: DataStoreNode,\r\n};\r\n\r\n// -----------------------------------------------------------------------------\r\n// 2. TYPES & INTERFACES\r\n// -----------------------------------------------------------------------------\r\n\r\ntype DFDNode = {\r\n    id: string;\r\n    type: 'process' | 'external_entity' | 'data_store';\r\n    label: string;\r\n};\r\n\r\ntype DFDFlow = {\r\n    from: string;\r\n    to: string;\r\n    label: string;\r\n};\r\n\r\ntype DFDLevel = {\r\n    nodes: DFDNode[];\r\n    flows: DFDFlow[];\r\n};\r\n\r\nexport type DFDInput = {\r\n    dfd_level_0?: DFDLevel;\r\n    dfd_level_1?: DFDLevel;\r\n};\r\n\r\n// -----------------------------------------------------------------------------\r\n// 3. HELPER: DATA MAPPING\r\n// -----------------------------------------------------------------------------\r\n\r\n// -----------------------------------------------------------------------------\r\n// 3. HELPER: DATA MAPPING & LAYOUT (DAGRE)\r\n// -----------------------------------------------------------------------------\r\n\r\nconst mapToReactFlow = (dfdData: DFDLevel | undefined, direction = 'LR', idPrefix = '') => {\r\n    if (!dfdData) return { nodes: [], edges: [] };\r\n\r\n    const isHorizontal = direction === 'LR';\r\n\r\n    const initialNodes = dfdData.nodes.map((node: any) => ({\r\n        id: idPrefix + node.id,\r\n        type: node.type,\r\n        data: { label: node.label },\r\n        // Use backend provided position, or default to 0,0\r\n        position: node.position || { x: 0, y: 0 },\r\n        targetPosition: isHorizontal ? Position.Left : Position.Top,\r\n        sourcePosition: isHorizontal ? Position.Right : Position.Bottom,\r\n    }));\r\n\r\n    const initialEdges = dfdData.flows.map((flow, i) => ({\r\n        id: `${idPrefix}e-${i}-${flow.from}-${flow.to}`,\r\n        source: idPrefix + flow.from,\r\n        target: idPrefix + flow.to,\r\n        label: flow.label,\r\n        type: 'smoothstep',\r\n        animated: true,\r\n        markerEnd: {\r\n            type: MarkerType.ArrowClosed,\r\n            color: '#334155',\r\n            width: 20,\r\n            height: 20\r\n        },\r\n        style: { stroke: '#64748b', strokeWidth: 2.5 },\r\n        labelStyle: { fill: '#0f172a', fontWeight: 800, fontSize: 10 },\r\n        labelBgStyle: { fill: '#f8fafc', fillOpacity: 0.9, rx: 4 }\r\n    }));\r\n\r\n    return { nodes: initialNodes, edges: initialEdges };\r\n};\r\n\r\ninterface DiagramCanvasProps {\r\n    title: string;\r\n    data: DFDLevel | undefined;\r\n    isExport?: boolean;\r\n    direction?: 'LR' | 'TB';\r\n    levelPrefix: string;\r\n}\r\n\r\nconst DiagramCanvas = ({ title, data, isExport = false, direction = 'LR', levelPrefix }: DiagramCanvasProps) => {\r\n    const [nodes, setNodes, onNodesChange] = useNodesState<DFDNodeType>([]);\r\n    const [edges, setEdges, onEdgesChange] = useEdgesState<any>([]);\r\n    const { fitView } = useReactFlow();\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const exportToImage = async () => {\r\n        if (!containerRef.current) return;\r\n\r\n        try {\r\n            const dataUrl = await toPng(containerRef.current, {\r\n                backgroundColor: '#ffffff',\r\n                quality: 1,\r\n                pixelRatio: 2, // Ret√≠na quality\r\n            });\r\n\r\n            const link = document.createElement('a');\r\n            link.download = `sra-dfd-${title.toLowerCase().replace(/\\s+/g, '-')}.png`;\r\n            link.href = dataUrl;\r\n            link.click();\r\n            toast.success(\"Image exported successfully!\");\r\n        } catch (err) {\r\n            console.error(\"Export failed:\", err);\r\n            toast.error(\"Failed to export image\");\r\n        }\r\n    };\r\n\r\n    if (!data) return null;\r\n\r\n    return (\r\n        <div className={`w-full border border-slate-200 bg-white rounded-xl overflow-hidden flex flex-col transition-all duration-500 shadow-sm ${isExport ? 'min-h-[800px] border-0' : 'h-[600px] mb-8'}`}>\r\n            {!isExport && (\r\n                <div className=\"px-6 py-4 border-b flex items-center justify-between transition-colors bg-slate-50 border-slate-200\">\r\n                    <span className=\"font-bold text-slate-800 tracking-tight\">{title}</span>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {!isExport && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={exportToImage}\r\n                                className=\"h-7 gap-1.5 text-slate-500 hover:text-blue-600 hover:bg-blue-50 transition-all rounded-lg\"\r\n                            >\r\n                                <Download className=\"h-3.5 w-3.5\" />\r\n                                <span className=\"text-[10px] font-bold uppercase tracking-tight\">Export PNG</span>\r\n                            </Button>\r\n                        )}\r\n                        <div className=\"px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all bg-blue-100 text-blue-700\">\r\n                            Interactive\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div ref={containerRef} className=\"flex-1 w-full h-full relative overflow-hidden bg-white\">\r\n                <ReactFlow\r\n                    nodes={nodes}\r\n                    edges={edges}\r\n                    onNodesChange={onNodesChange}\r\n                    onEdgesChange={onEdgesChange}\r\n                    nodeTypes={nodeTypes}\r\n                    fitView\r\n                    fitViewOptions={{ padding: 0.1 }}\r\n                    attributionPosition=\"bottom-right\"\r\n                    minZoom={0.1}\r\n                    maxZoom={2}\r\n                    nodesConnectable={false}\r\n                >\r\n                    <Background color=\"#aaa\" gap={16} />\r\n                    {!isExport && <Controls />}\r\n                </ReactFlow>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DFDViewer = ({ data, isExport = false }: { data: DFDInput; isExport?: boolean }) => {\r\n    if (!data) return <div className=\"text-gray-500 italic\">No DFD data available</div>;\r\n\r\n    return (\r\n        <div className={`w-full flex flex-col ${isExport ? 'h-full gap-0' : 'gap-8 px-4 py-6'}`}>\r\n            {!isExport && (\r\n                <div className=\"flex items-center justify-end mb-2\">\r\n                    <div className=\"text-[10px] text-slate-400 font-medium uppercase tracking-[0.2em] flex items-center gap-2 mr-2\">\r\n                        <Layers className=\"h-3 w-3\" />\r\n                        Analysis Fidelity\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {data.dfd_level_0 && (\r\n                <ReactFlowProvider>\r\n                    <DiagramCanvas\r\n                        title=\"DFD Level 0 (Context Diagram)\"\r\n                        data={data.dfd_level_0}\r\n                        isExport={isExport}\r\n                        direction=\"LR\"\r\n                        levelPrefix=\"l0-\"\r\n                    />\r\n                </ReactFlowProvider>\r\n            )}\r\n            {data.dfd_level_1 && (\r\n                <ReactFlowProvider>\r\n                    <DiagramCanvas\r\n                        title=\"DFD Level 1 (Decomposition)\"\r\n                        data={data.dfd_level_1}\r\n                        isExport={isExport}\r\n                        direction=\"TB\"\r\n                        levelPrefix=\"l1-\"\r\n                    />\r\n                </ReactFlowProvider>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DFDViewer;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\about-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis-history.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis\\accordion-input.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1750,1753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1750,1753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4554,4557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4554,4557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis\\analysis-loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis\\dfd-diagram-section.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { Loader2, Network, RefreshCw, Sparkles, Binary, Shapes } from \"lucide-react\"\r\nimport { motion, AnimatePresence } from \"framer-motion\"\r\nimport { toast } from \"sonner\"\r\nimport { generateDFD } from \"@/lib/analysis-api\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\n// import DFDViewer, { DFDInput } from \"@/components/DFDViewer\" // STATIC\r\nimport dynamic from 'next/dynamic'\r\nimport { DFDInput } from \"@/components/DFDViewer\" // Type only\r\nimport { Diagram } from \"@/types/analysis\"\r\n\r\nconst DFDViewer = dynamic(() => import('@/components/DFDViewer'), {\r\n    loading: () => <div className=\"h-[400px] w-full flex items-center justify-center bg-muted/5 animate-pulse\">Loading Diagram...</div>,\r\n    ssr: false // React Flow is client-side only\r\n})\r\n\r\ninterface DFDDiagramSectionProps {\r\n    data?: { level0: string; level1: string; caption: string } | Diagram | string | Record<string, unknown> | null\r\n    projectId?: string\r\n    projectTitle: string\r\n    description: string\r\n    srsContent?: string\r\n    onUpdate?: (newData: DFDInput) => void\r\n}\r\n\r\nexport function DFDDiagramSection({ data, projectTitle, description, srsContent, onUpdate }: DFDDiagramSectionProps) {\r\n    const { token } = useAuth()\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [localData, setLocalData] = useState<DFDInput | null>(null)\r\n    const [loadingPhase, setLoadingPhase] = useState(0)\r\n\r\n    const loadingPhases = [\r\n        { icon: <Sparkles className=\"h-5 w-5\" />, text: \"Contextualizing Requirements...\" },\r\n        { icon: <Binary className=\"h-5 w-5\" />, text: \"Extracting Data Entities...\" },\r\n        { icon: <Network className=\"h-5 w-5\" />, text: \"Architecting Data Flow Levels...\" },\r\n        { icon: <Shapes className=\"h-5 w-5\" />, text: \"Compiling Visual Model...\" }\r\n    ]\r\n\r\n    // Detect if we have new structured data\r\n    const isStructured = data && typeof data === 'object' && 'dfd_level_0' in data;\r\n    const structuredData = localData || (isStructured ? (data as unknown as DFDInput) : null);\r\n\r\n    // Detect if empty\r\n    const isEmpty = !structuredData && (!data || (typeof data === 'string' && data.length < 10) || (typeof data === 'object' && Object.keys(data).length === 0));\r\n\r\n    const handleGenerate = async () => {\r\n        if (!token) return\r\n        setIsLoading(true)\r\n        setLoadingPhase(0)\r\n\r\n        // Cycle through phases\r\n        const phaseInterval = setInterval(() => {\r\n            setLoadingPhase(prev => (prev + 1) % loadingPhases.length)\r\n        }, 2500)\r\n\r\n        try {\r\n            const result = await generateDFD(token, {\r\n                projectName: projectTitle,\r\n                description,\r\n                srsContent\r\n            })\r\n\r\n            // Optimistic Update\r\n            setLocalData(result);\r\n\r\n            // Call parent update to save to DB\r\n            if (onUpdate) {\r\n                onUpdate(result);\r\n            }\r\n            toast.success(\"DFD Generated Successfully\")\r\n        } catch (err) {\r\n            console.error(\"[DFD] Generation failed:\", err)\r\n            toast.error(\"Failed to generate DFD\")\r\n        } finally {\r\n            clearInterval(phaseInterval)\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Card className=\"bg-slate-900 border-slate-800 w-full min-h-[400px] flex items-center justify-center relative overflow-hidden shadow-2xl\">\r\n                <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(59,130,246,0.1),transparent)]\" />\r\n\r\n                <div className=\"flex flex-col items-center gap-6 relative z-10\">\r\n                    <div className=\"relative h-20 w-20\">\r\n                        <motion.div\r\n                            className=\"absolute inset-0 border-4 border-blue-500/20 rounded-full\"\r\n                            animate={{ rotate: 360 }}\r\n                            transition={{ duration: 4, repeat: Infinity, ease: \"linear\" }}\r\n                        />\r\n                        <motion.div\r\n                            className=\"absolute inset-0 border-t-4 border-blue-500 rounded-full\"\r\n                            animate={{ rotate: 360 }}\r\n                            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                        />\r\n                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                            <AnimatePresence mode=\"wait\">\r\n                                <motion.div\r\n                                    key={loadingPhase}\r\n                                    initial={{ opacity: 0, scale: 0.5 }}\r\n                                    animate={{ opacity: 1, scale: 1 }}\r\n                                    exit={{ opacity: 0, scale: 0.5 }}\r\n                                    className=\"text-blue-400\"\r\n                                >\r\n                                    {loadingPhases[loadingPhase].icon}\r\n                                </motion.div>\r\n                            </AnimatePresence>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-center space-y-1\">\r\n                        <AnimatePresence mode=\"wait\">\r\n                            <motion.p\r\n                                key={loadingPhase}\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, y: -10 }}\r\n                                className=\"text-lg font-medium text-white tracking-tight\"\r\n                            >\r\n                                {loadingPhases[loadingPhase].text}\r\n                            </motion.p>\r\n                        </AnimatePresence>\r\n                        <p className=\"text-xs text-slate-500 uppercase tracking-widest font-bold\">\r\n                            AI Engine Engaged\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <motion.div\r\n                    className=\"absolute bottom-0 left-0 h-1 bg-blue-500\"\r\n                    animate={{ width: \"100%\" }}\r\n                    transition={{ duration: 10, ease: \"easeInOut\" }}\r\n                />\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    if (isEmpty && !structuredData) {\r\n        return (\r\n            <Card className=\"bg-card border-dashed\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                        <Network className=\"h-5 w-5 text-primary\" />\r\n                        Data Flow Diagram\r\n                    </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"h-[200px] flex flex-col items-center justify-center gap-4\">\r\n                    <p className=\"text-sm text-muted-foreground\">No DFD generated yet.</p>\r\n                    <Button onClick={handleGenerate} variant=\"outline\" className=\"gap-2\">\r\n                        <Network className=\"h-4 w-4\" />\r\n                        Generate DFD\r\n                    </Button>\r\n                </CardContent>\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Card className=\"bg-card border-border overflow-hidden\">\r\n            <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n                <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                    <Network className=\"h-5 w-5 text-primary\" />\r\n                    Data Flow Diagram\r\n                </CardTitle>\r\n                <Button size=\"sm\" variant=\"ghost\" onClick={handleGenerate} title=\"Regenerate\">\r\n                    <RefreshCw className=\"h-4 w-4 text-muted-foreground hover:text-primary\" />\r\n                </Button>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0 sm:p-6 bg-muted/5 min-h-[400px]\">\r\n                {structuredData ? (\r\n                    <DFDViewer data={structuredData} />\r\n                ) : (\r\n                    <div className=\"p-8 text-center text-muted-foreground\">\r\n                        <p>Legacy format detected. Please regenerate to view in React Flow.</p>\r\n                        <Button onClick={handleGenerate} variant=\"outline\" className=\"mt-4 gap-2\">\r\n                            <RefreshCw className=\"h-4 w-4\" />\r\n                            Regenerate as React Flow\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis\\dfd-generation-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\analysis\\validation-report.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\api-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\app-shell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\app-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\chat-input.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'settings'. Either include it or remove the dependency array.","line":64,"column":6,"nodeType":"ArrayExpression","endLine":64,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [initialSettings, settings]","fix":{"range":[2406,2423],"text":"[initialSettings, settings]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\code-viewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\diagram-editor.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":77,"column":26,"nodeType":"Identifier","endLine":77,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useEffect, useCallback } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport { MermaidRenderer } from \"@/components/mermaid-renderer\"\r\nimport { Edit2, Save, ExternalLink, Loader2 } from \"lucide-react\"\r\nimport { toast } from \"sonner\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport { throttle } from \"@/lib/utils\"\r\nimport {\r\n    Sheet,\r\n    SheetContent,\r\n    SheetDescription,\r\n    SheetHeader,\r\n    SheetTitle,\r\n    SheetTrigger,\r\n} from \"@/components/ui/sheet\"\r\n\r\ninterface DiagramEditorProps {\r\n    title: string\r\n    initialCode: string\r\n    syntaxExplanation?: string\r\n    onSave: (newCode: string, options?: { inPlace?: boolean }) => Promise<void>\r\n    onOpenChange?: (isOpen: boolean) => void\r\n}\r\n\r\nexport function DiagramEditor({ title, initialCode, syntaxExplanation, onSave, onOpenChange }: DiagramEditorProps) {\r\n    const [open, setOpen] = useState(false)\r\n    const [code, setCode] = useState(initialCode)\r\n    const [isSaving, setIsSaving] = useState(false)\r\n    const [lastError, setLastError] = useState<string | null>(null)\r\n    const [isRepairing, setIsRepairing] = useState(false)\r\n    const [failedCodes, setFailedCodes] = useState<Set<string>>(new Set())\r\n    const { token } = useAuth()\r\n\r\n    // Sync if prop changes externally\r\n    useEffect(() => {\r\n        setCode(initialCode)\r\n    }, [initialCode])\r\n\r\n    const handleOpenChange = (newOpen: boolean) => {\r\n        setOpen(newOpen)\r\n        onOpenChange?.(newOpen)\r\n    }\r\n\r\n    const handleSave = throttle(async () => {\r\n        setIsSaving(true)\r\n        try {\r\n            await onSave(code)\r\n            setOpen(false)\r\n            onOpenChange?.(false)\r\n            toast.success(\"Diagram saved successfully\")\r\n        } catch {\r\n            toast.error(\"Failed to save diagram\")\r\n        } finally {\r\n            setIsSaving(false)\r\n        }\r\n    }, 2000)\r\n\r\n    const openLiveEditor = () => {\r\n        const state = {\r\n            code: code,\r\n            mermaid: { theme: 'default' },\r\n            autoSync: true,\r\n            updateDiagram: true\r\n        }\r\n        const json = JSON.stringify(state)\r\n        // Browser-safe base64 encoding for UTF-8 strings\r\n        const data = window.btoa(encodeURIComponent(json).replace(/%([0-9A-F]{2})/g,\r\n            function toSolidBytes(match, p1) {\r\n                return String.fromCharCode(parseInt(p1, 16));\r\n            }))\r\n        window.open(`https://mermaid.live/edit#base64:${data}`, '_blank')\r\n    }\r\n\r\n    const repairWithAI = useCallback(throttle(async () => {\r\n        if (!lastError) return\r\n\r\n        setIsRepairing(true)\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_BACKEND_URL}/analyze/repair-diagram`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    Authorization: `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({\r\n                    code: code,\r\n                    error: lastError,\r\n                    syntaxExplanation: syntaxExplanation\r\n                })\r\n            })\r\n\r\n            if (!res.ok) throw new Error(\"Repair failed\")\r\n\r\n            const data = await res.json()\r\n            if (data.code && data.code !== code) {\r\n                const repairedCode = data.code\r\n                // Mark the old code as failed so we don't try it again\r\n                setFailedCodes(prev => new Set(prev).add(code))\r\n\r\n                setCode(repairedCode)\r\n                setLastError(null)\r\n\r\n                toast.success(\"Intelligent repair successful\", { id: \"repair-status\" })\r\n                try {\r\n                    await onSave(repairedCode, { inPlace: true })\r\n                    toast.success(\"Diagram fixed and saved\", { id: \"repair-status\" })\r\n                } catch (saveErr) {\r\n                    console.error(\"Auto-save failed:\", saveErr)\r\n                    toast.error(\"Fixed locally, but failed to save.\", { id: \"repair-status\" })\r\n                }\r\n            } else {\r\n                // If the AI returned the same code, it means it couldn't fix it.\r\n                setFailedCodes(prev => new Set(prev).add(code))\r\n                toast.error(\"AI couldn't repair this diagram automatically\")\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n            setFailedCodes(prev => new Set(prev).add(code))\r\n            toast.error(\"Failed to repair diagram\")\r\n        } finally {\r\n            setIsRepairing(false)\r\n        }\r\n    }, 3000), [code, lastError, token, onSave])\r\n\r\n    // Automatic Repair Trigger\r\n    useEffect(() => {\r\n        if (lastError && !isRepairing && !failedCodes.has(code)) {\r\n            repairWithAI()\r\n        } else if (lastError && failedCodes.has(code)) {\r\n            console.warn(\"Already attempted repair for this code, skipping to avoid loop.\")\r\n        }\r\n    }, [lastError, code, isRepairing, failedCodes, repairWithAI])\r\n\r\n    return (\r\n        <div className=\"space-y-4 h-full flex flex-col\">\r\n            <div className=\"flex flex-col gap-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <h3 className=\"text-lg font-medium\">{title}</h3>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button variant=\"outline\" size=\"sm\" onClick={openLiveEditor}>\r\n                            <ExternalLink className=\"mr-2 h-4 w-4\" />\r\n                            Mermaid Live\r\n                        </Button>\r\n                        <Sheet open={open} onOpenChange={handleOpenChange}>\r\n                            <SheetTrigger asChild>\r\n                                <Button size=\"sm\">\r\n                                    <Edit2 className=\"mr-2 h-4 w-4\" />\r\n                                    Edit Diagram\r\n                                </Button>\r\n                            </SheetTrigger>\r\n                            <SheetContent side=\"right\" className=\"w-full sm:max-w-4xl sm:w-[80vw] flex flex-col h-full p-0\">\r\n                                <div className=\"p-6 pb-0\">\r\n                                    <SheetHeader className=\"mb-4\">\r\n                                        <SheetTitle>Edit {title}</SheetTitle>\r\n                                        <SheetDescription>\r\n                                            Modify the Mermaid diagram code below. Changes are reflected in the preview.\r\n                                        </SheetDescription>\r\n                                    </SheetHeader>\r\n                                    {syntaxExplanation && (\r\n                                        <div className=\"mb-4 p-4 border rounded-md bg-muted/50 text-sm font-mono whitespace-pre-wrap\">\r\n                                            <p className=\"font-bold mb-2\">DIAGRAM SYNTAX AUTHORITY SPECIFICATION:</p>\r\n                                            {syntaxExplanation}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"flex-1 overflow-y-auto p-6 pt-0\">\r\n                                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 h-full min-h-[500px]\">\r\n                                        <div className=\"h-full flex flex-col gap-2\">\r\n                                            <h4 className=\"font-medium text-sm\">Mermaid Code</h4>\r\n                                            <Textarea\r\n                                                value={code}\r\n                                                onChange={(e) => setCode(e.target.value)}\r\n                                                className=\"font-mono text-sm h-full resize-none p-4 leading-relaxed flex-1\"\r\n                                                placeholder=\"Enter Mermaid syntax here...\"\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"h-full flex flex-col gap-2\">\r\n                                            <h4 className=\"font-medium text-sm\">Live Preview</h4>\r\n                                            <div className=\"h-full border rounded-md overflow-hidden bg-white/50 dark:bg-black/20 p-4 relative flex-1\">\r\n                                                <div className=\"absolute inset-0 overflow-auto flex items-center justify-center p-4\">\r\n                                                    <MermaidRenderer\r\n                                                        chart={code}\r\n                                                        title={`${title} (Preview)`}\r\n                                                        className=\"h-full\"\r\n                                                        onError={(err) => setLastError(err)}\r\n                                                    />\r\n                                                </div>\r\n                                                {isRepairing && (\r\n                                                    <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-card/80 z-20 backdrop-blur-sm transition-all duration-300\">\r\n                                                        <Loader2 className=\"h-8 w-8 animate-spin text-primary mb-2\" />\r\n                                                        <p className=\"text-sm font-medium animate-pulse\">Intelligent Repair in Progress...</p>\r\n                                                        <p className=\"text-xs text-muted-foreground mt-1\">Applying Diagram Authority Rules</p>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"p-6 border-t mt-auto bg-background z-10 flex justify-end gap-2\">\r\n                                    <Button variant=\"outline\" onClick={() => { handleOpenChange(false); setCode(initialCode); }}>\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button onClick={handleSave} disabled={isSaving}>\r\n                                        <Save className=\"h-4 w-4 mr-2\" />\r\n                                        {isSaving ? \"Saving...\" : \"Save Changes\"}\r\n                                    </Button>\r\n                                </div>\r\n                            </SheetContent>\r\n                        </Sheet>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Read-only view in the main flow */}\r\n            <div className=\"flex-1 min-h-[300px] overflow-auto relative\">\r\n                <MermaidRenderer\r\n                    key={initialCode.length}\r\n                    chart={initialCode}\r\n                    title={title}\r\n                    onError={(err) => setLastError(err)}\r\n                />\r\n                {isRepairing && !open && (\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-card/80 z-20 backdrop-blur-sm transition-all duration-300\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary mb-2\" />\r\n                        <p className=\"text-sm font-medium animate-pulse\">Repairing Syntax...</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\editable-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\error-boundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\faq-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\feature-display.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\hero-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\improvement-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\input-section.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\kv-display.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[427,430],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[427,430],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[641,644],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[641,644],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":80,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3184,3187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3184,3187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4598,4601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4598,4601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\mermaid-renderer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'onError'. Either include it or remove the dependency array. If 'onError' changes too often, find the parent component that defines it and wrap that definition in useCallback.","line":100,"column":8,"nodeType":"ArrayExpression","endLine":100,"endColumn":49,"suggestions":[{"desc":"Update the dependencies array to be: [chart, mermaidInstance, title, isExport, onError]","fix":{"range":[3515,3556],"text":"[chart, mermaidInstance, title, isExport, onError]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface Diagram {\r\n    code: string;\r\n    caption?: string;\r\n}\r\n\r\ninterface MermaidRendererProps {\r\n    chart: string | Diagram\r\n    title: string\r\n    className?: string\r\n    onError?: (error: string) => void\r\n    isExport?: boolean\r\n}\r\n\r\ninterface MermaidInstance {\r\n    render: (id: string, text: string) => Promise<{ svg: string }>\r\n}\r\n\r\nexport function MermaidRenderer({ chart, title, className, onError, isExport = false }: MermaidRendererProps) {\r\n    const ref = useRef<HTMLDivElement>(null)\r\n    const [mermaidInstance, setMermaidInstance] = useState<MermaidInstance | null>(null)\r\n    const [hasError, setHasError] = useState(false)\r\n\r\n    useEffect(() => {\r\n        import(\"mermaid\").then((m) => {\r\n            m.default.initialize({\r\n                startOnLoad: false,\r\n                theme: isExport ? 'neutral' : 'default', // Neutral is reliable grayscale/B&W\r\n                themeVariables: isExport ? {\r\n                    fontFamily: 'arial, sans-serif',\r\n                    fontSize: '16px', // Force larger font\r\n                    nodeBorder: '#000000',\r\n                    mainBkg: '#ffffff',\r\n                    textColor: '#000000',\r\n                    lineColor: '#000000'\r\n                } : undefined,\r\n                securityLevel: 'loose',\r\n                fontFamily: 'arial, sans-serif',\r\n                flowchart: { useMaxWidth: !isExport, htmlLabels: true }\r\n            })\r\n            setMermaidInstance(m.default)\r\n        })\r\n    }, [isExport])\r\n\r\n    useEffect(() => {\r\n        setHasError(false)\r\n        if (!chart || !mermaidInstance) return\r\n\r\n        // Extract code string\r\n        const code = typeof chart === 'string' ? chart : (chart?.code || \"\");\r\n\r\n        // Clean the string:\r\n        // 1. Replace escaped newlines\r\n        // 2. Remove any non-printable characters (except newlines and tabs)\r\n        // 3. Trim whitespace\r\n        const formatted = code\r\n            .replace(/\\\\n/g, \"\\n\")\r\n            .replace(/[^\\x20-\\x7E\\n\\t]/g, \"\")\r\n            .trim()\r\n\r\n\r\n\r\n        const renderDiagram = async () => {\r\n            try {\r\n                // Clear previous content\r\n                if (ref.current) ref.current.innerHTML = \"\"\r\n\r\n                const id = \"diagram-\" + Math.random().toString(36).substring(7)\r\n                const { svg } = await mermaidInstance.render(id, formatted)\r\n\r\n                if (ref.current) {\r\n                    ref.current.innerHTML = svg\r\n                    // Force SVG to be 100% width/height if export\r\n                    if (isExport) {\r\n                        const svgEl = ref.current.querySelector('svg');\r\n                        if (svgEl) {\r\n                            svgEl.removeAttribute('height'); // Allow scaling\r\n                            svgEl.removeAttribute('width');\r\n                            svgEl.style.width = '100%';\r\n                            svgEl.style.height = 'auto';\r\n                        }\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Mermaid Render Error:\", err)\r\n                const errorMessage = err instanceof Error ? err.message : String(err)\r\n                setHasError(true)\r\n                onError?.(errorMessage)\r\n            }\r\n        }\r\n\r\n        renderDiagram()\r\n        renderDiagram()\r\n    }, [chart, mermaidInstance, title, isExport])\r\n\r\n    // EXPORT MODE: Render clean, auto-sized div without Card/Scrollbars\r\n    if (isExport) {\r\n        return (\r\n            <div className={cn(\"w-full bg-white flex flex-col items-center\", className)}>\r\n                <div\r\n                    ref={ref}\r\n                    className={cn(\r\n                        \"w-full flex justify-center\", // Removed p-4 to minimize padding\r\n                        (hasError || !chart) ? \"opacity-0\" : \"opacity-100\"\r\n                    )}\r\n                />\r\n                {hasError && <p className=\"text-red-500 text-sm\">Render Error</p>}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // NORMAL MODE: Interactive Card\r\n    return (\r\n        <Card className={cn(\r\n            \"h-[500px] w-full bg-card border-border transition-all duration-300 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/10 group flex flex-col relative\",\r\n            className\r\n        )}>\r\n            <CardHeader className=\"pb-2\">\r\n                <CardTitle className=\"text-base\">{title}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 overflow-auto min-h-0 p-0 relative\">\r\n                {hasError || !chart ? (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground text-sm bg-card/50 z-10 p-4 text-center\">\r\n                        {hasError ? \"Unable to render diagram. Please check syntax.\" : \"No diagram available\"}\r\n                    </div>\r\n                ) : null}\r\n                <div\r\n                    ref={ref}\r\n                    className={cn(\r\n                        \"flex justify-center w-full min-w-max p-4\",\r\n                        (hasError || !chart) ? \"opacity-0 pointer-events-none\" : \"opacity-100\"\r\n                    )}\r\n                />\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\placeholder-diagram.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\project-chat-panel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\results-tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\security-settings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\story-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\animated-theme-toggler.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\smooth-cursor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\version-diff-viewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\version-timeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\components\\workflow-phases.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\analysis-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\auth-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\export-utils.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":280,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12576,12579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12576,12579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":315,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13964,13967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13964,13967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":419,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":419,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17389,17392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17389,17392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1026,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1026,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[41180,41183],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[41180,41183],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1036,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1036,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[41656,41659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[41656,41659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1324,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1324,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[53718,53721],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[53718,53721],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1339,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1339,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[54312,54315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[54312,54315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1491,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1491,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[60939,60942],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[60939,60942],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":1507,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1507,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[61467,61470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[61467,61470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\intake-context.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":15}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2485,2488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2485,2488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3554,3557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3554,3557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { SRSIntakeModel, IntakeField, ValidationResult } from '../types/srs-intake';\r\nimport { SRS_STRUCTURE, createInitialIntakeState } from './srs-structure';\r\nimport { toast } from 'sonner';\r\n\r\ninterface IntakeContextType {\r\n    data: SRSIntakeModel;\r\n    activeSectionId: string;\r\n    activeSectionIndex: number;\r\n    updateField: (sectionKey: keyof SRSIntakeModel, fieldKey: string, value: string) => void;\r\n    setActiveSection: (sectionId: string) => void;\r\n    nextSection: () => void;\r\n    prevSection: () => void;\r\n    canProceed: boolean;\r\n    saveDraft: () => void;\r\n    validateRequirements: () => Promise<void>;\r\n    validationResult: ValidationResult | null;\r\n    isValidating: boolean;\r\n    clearValidation: () => void;\r\n}\r\n\r\n// Helper for backend URL\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000';\r\n\r\nconst IntakeContext = createContext<IntakeContextType | undefined>(undefined);\r\n\r\nexport const IntakeProvider = ({ children }: { children: ReactNode }) => {\r\n    // Try to load from localStorage first (client-side only pattern)\r\n    const [data, setData] = useState<SRSIntakeModel>(createInitialIntakeState());\r\n    const [activeSectionId, setActiveSectionIdState] = useState<string>('1');\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const savedData = localStorage.getItem('sra_intake_draft');\r\n        if (savedData) {\r\n            try {\r\n                // Deep merge or specific parsing could be safer, but for now strict parse\r\n                const parsed = JSON.parse(savedData);\r\n                setData(parsed);\r\n            } catch (e) {\r\n                console.error(\"Failed to load draft\", e);\r\n            }\r\n        }\r\n        setIsLoaded(true);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isLoaded) {\r\n            localStorage.setItem('sra_intake_draft', JSON.stringify(data));\r\n        }\r\n    }, [data, isLoaded]);\r\n\r\n    const activeSectionIndex = SRS_STRUCTURE.findIndex(s => s.id === activeSectionId);\r\n    const activeSectionConfig = SRS_STRUCTURE[activeSectionIndex];\r\n\r\n    const updateField = (sectionKey: keyof SRSIntakeModel, fieldKey: string, value: string) => {\r\n        setData(prev => {\r\n            const section = prev[sectionKey];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const field = (section as any)[fieldKey] as IntakeField;\r\n\r\n            // Determine status\r\n            const status = value.trim().length > 0 ? 'complete' : 'empty';\r\n\r\n            return {\r\n                ...prev,\r\n                [sectionKey]: {\r\n                    ...section,\r\n                    [fieldKey]: {\r\n                        ...field,\r\n                        content: value,\r\n                        metadata: {\r\n                            ...field.metadata,\r\n                            completion_status: status\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n        });\r\n    };\r\n\r\n    // Validation Logic\r\n    const checkCanProceed = () => {\r\n        if (!activeSectionConfig) return false;\r\n\r\n        // Standard Sections\r\n        return activeSectionConfig.subsections.every(sub => {\r\n            if (!sub.isRequired) return true;\r\n            const section = data[activeSectionConfig.key as keyof SRSIntakeModel];\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const field = (section as any)[sub.key] as IntakeField;\r\n            return field && field.content && field.content.trim().length > 0;\r\n        });\r\n    };\r\n\r\n    const canProceed = checkCanProceed();\r\n\r\n    const nextSection = () => {\r\n        if (!canProceed) return;\r\n        if (activeSectionIndex < SRS_STRUCTURE.length - 1) {\r\n            setActiveSectionIdState(SRS_STRUCTURE[activeSectionIndex + 1].id);\r\n            window.scrollTo(0, 0);\r\n        }\r\n    };\r\n\r\n    const prevSection = () => {\r\n        if (activeSectionIndex > 0) {\r\n            setActiveSectionIdState(SRS_STRUCTURE[activeSectionIndex - 1].id);\r\n            window.scrollTo(0, 0);\r\n        }\r\n    };\r\n\r\n    const setActiveSection = (id: string) => {\r\n        setActiveSectionIdState(id);\r\n    }\r\n\r\n    const [validationResult, setValidationResult] = useState<ValidationResult | null>(null);\r\n    const [isValidating, setIsValidating] = useState(false);\r\n\r\n    const validateRequirements = async () => {\r\n        setIsValidating(true);\r\n        // Clear previous result\r\n        setValidationResult(null);\r\n\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/validation`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(data)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const err = await response.json();\r\n                throw new Error(err.message || 'Validation request failed');\r\n            }\r\n\r\n            const result: ValidationResult = await response.json();\r\n            setValidationResult(result);\r\n        } catch (error) {\r\n            console.error(\"Validation Error:\", error);\r\n            // On error, show a generic failure result or alert\r\n            alert(\"Validation failed to complete. Please try again.\");\r\n        } finally {\r\n            setIsValidating(false);\r\n        }\r\n    };\r\n\r\n    const clearValidation = () => setValidationResult(null);\r\n\r\n    const saveDraft = () => {\r\n        localStorage.setItem('sra_intake_draft', JSON.stringify(data));\r\n        alert('Draft saved locally!');\r\n    };\r\n\r\n    return (\r\n        <IntakeContext.Provider value={{\r\n            data,\r\n            activeSectionId,\r\n            activeSectionIndex,\r\n            updateField,\r\n            setActiveSection,\r\n            nextSection,\r\n            prevSection,\r\n            canProceed,\r\n            saveDraft,\r\n            validateRequirements,\r\n            validationResult,\r\n            isValidating,\r\n            clearValidation\r\n        }}>\r\n            {children}\r\n        </IntakeContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useIntake = () => {\r\n    const context = useContext(IntakeContext);\r\n    if (!context) throw new Error('useIntake must be used within IntakeProvider');\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\layer-context.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\projects-api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\render-markdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\srs-structure.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\lib\\utils.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2168,2171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2168,2171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2178,2181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2178,2181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3127,3130],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3127,3130],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3137,3140],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3137,3140],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\types\\analysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\types\\project.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\3rd Year\\SRA\\frontend\\types\\srs-intake.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]